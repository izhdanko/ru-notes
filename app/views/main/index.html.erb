<div class="bg-light p-3">
  <% @approved_posts.each do |post| %>
    <div class="post">
 

      <h2><%= post.title %></h2>

      <div class="mt-3">
       <!-- Проверяем, есть ли у поста изображения. -->
        <% if post.images.attached? %>
          <% post.images.limit(4).each do |image| %>
            <%= link_to image_tag(image.variant(resize: "300x300"), class: 'img-thumbnail'), url_for(image), data: { lightbox: "gallery" } %>
          <% end %>
        <% else %>
          <p>Нет изображений</p>
        <% end %>
      </div>

      <div class="mt-3">
        <p><%= truncate(post.content.to_plain_text, length: 500) %></p>
        <p><%= link_to 'Прочитать', post_path(post), class: 'btn btn-primary', style: 'width: 200px; display: inline-block;' %></p>
      </div>

      <hr />
    </div>
  <% end %>
</div>


<button id="backToTop" class="btn btn-primary btn-sm" style="width: 50px; height: 50px; border-radius: 50%; display: none; position: fixed; bottom: 20px; right: 20px; z-index: 100;">↑</button>

<script>
  // Получить кнопку.
  const backToTopButton = document.getElementById('backToTop');

  // Показать кнопку, когда прокрутка страницы больше 300px.
  window.onscroll = function() {
    if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
      backToTopButton.style.display = "block";
    } else {
      backToTopButton.style.display = "none";
    }
  };

  // Когда нажата кнопка, прокрутить наверх.
  backToTopButton.onclick = function() {
    window.scrollTo({
      top: 0,
      behavior: 'smooth' // Прокрутка будет плавной.
    });
  };
</script>

